{"id":"mulch-007","title":"Fix record --stdin: type inference and classification defaulting","status":"closed","type":"bug","priority":1,"createdAt":"2026-02-13T21:39:42.891379-08:00","updatedAt":"2026-02-13T21:42:02.105944-08:00","assignee":"jayminwest@gmail.com","description":"Two bugs in record --stdin mode: (1) Remove makeOptionMandatory() from --type so stdin can infer type from JSON body, add manual validation for non-stdin path. (2) Default classification to tactical in processStdinRecords when missing from JSON body.","closeReason":"Fixed stdin mode: removed mandatory --type to allow inference from JSON body, added manual validation for non-stdin path, defaulted classification to tactical when missing","closedAt":"2026-02-13T21:42:02.105944-08:00"}
{"id":"mulch-0c2","title":"doctor governance warning lacks domain name and threshold","status":"closed","type":"bug","priority":3,"createdAt":"2026-02-17T08:24:46.51253-08:00","updatedAt":"2026-02-17T09:00:43.387999-08:00","assignee":"jayminwest@gmail.com","description":"The governance threshold warning from mulch doctor doesn't say WHICH domain or WHAT the threshold is. Just '1 domain(s) over governance thresholds'. Should say something like 'cli: 100 records (threshold: 100)' or similar.","closeReason":"Fixed: doctor governance warning now shows domain name and threshold in CLI output via check.details display","closedAt":"2026-02-17T09:00:43.387999-08:00"}
{"id":"mulch-0fj","title":"Add mulch sync command","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-10T10:14:54.773545-08:00","updatedAt":"2026-02-10T10:38:13.691063-08:00","assignee":"jayminwest@gmail.com","description":"One command that validates records, stages .mulch/ changes, and commits. Instead of the 3-step dance (mulch validate, git add .mulch/, git commit), agents run mulch sync and it's done. Keep it simple: validate → git add .mulch/ → git commit with standard message. No daemon, no auto-push (agents can push themselves). Just reduce friction of the session-end workflow.","closeReason":"Added mulch sync: validates records, git add .mulch/, git commit. Options: --message, --no-validate. Supports --json. Checks for git repo, handles no-changes case.","closedAt":"2026-02-10T10:38:13.691063-08:00"}
{"id":"mulch-0h1","title":"Review: compact.ts test additions","status":"closed","type":"task","priority":1,"createdAt":"2026-02-17T08:46:41.254875-08:00","updatedAt":"2026-02-17T08:49:32.226209-08:00","assignee":"jayminwest@gmail.com","closeReason":"FAIL: Tests pass but don't verify compact command behavior. Tests only create records without calling compact functions or testing filtering/formatting logic. See mail msg-dwm64vgv821f for details.","closedAt":"2026-02-17T08:49:32.226209-08:00"}
{"id":"mulch-0hb","title":"Scout: explore record schema and BaseRecord extension points","status":"closed","type":"task","priority":2,"createdAt":"2026-02-20T11:16:06.675378-08:00","updatedAt":"2026-02-20T11:17:25.213088-08:00","assignee":"jayminwest@gmail.com","closeReason":"Completed exploration of record schema and BaseRecord extension points. Documented all files requiring changes to add new record types (9 files total), required schema modifications, formatting changes, duplicate detection logic, and which commands are generic. Identified 13 extension points across schema, utilities, and command handlers.","closedAt":"2026-02-20T11:17:25.213088-08:00"}
{"id":"mulch-0ih","title":"--full flag ignored in prime command with default markdown format","status":"closed","type":"bug","priority":1,"createdAt":"2026-02-12T10:40:31.275364-08:00","updatedAt":"2026-02-12T10:41:42.699454-08:00","assignee":"jayminwest@gmail.com","description":"Bug: `mulch prime --full` produces identical output to `mulch prime` (compact format). The `--full` flag is supposed to include full record details (classification, evidence, grouped sections) but is silently ignored.\n\nRoot cause in src/commands/prime.ts line 196: the condition `options.verbose || format !== \"markdown\"` gates the non-compact formatter. `--full` is not checked, so with the default markdown format, the else branch always runs `formatDomainExpertiseCompact` which ignores the flag entirely.\n\nFix: Change the condition to `options.verbose || options.full || format !== \"markdown\"` so --full routes to `formatDomainExpertise` which respects the full option. Same fix needed for the output wrapper at line 223.","closeReason":"Fixed: added options.full to routing conditions at prime.ts lines 196 and 223","closedAt":"2026-02-12T10:41:42.699454-08:00"}
{"id":"mulch-0oi","title":"Review: query.ts outcome→outcomes fix","status":"closed","type":"task","priority":0,"createdAt":"2026-02-20T14:02:09.336418-08:00","updatedAt":"2026-02-20T14:18:42.784846-08:00","assignee":"jayminwest@gmail.com","closeReason":"Review complete, FAIL due to cross-branch dependency but query.ts changes verified correct","closedAt":"2026-02-20T14:18:42.784846-08:00"}
{"id":"mulch-0v4","title":"mulch diff [--since <ref>]","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-13T21:06:00.28566-08:00","updatedAt":"2026-02-13T21:19:07.332206-08:00","assignee":"jayminwest@gmail.com","description":"New command to show expertise changes since a git ref. Parse git diff output for added/removed JSONL lines, group by domain. Default --since HEAD~1 or time-based. Register in cli.ts. ~2hr effort.","closeReason":"Implemented mulch diff command (new read-only command showing expertise changes since a git ref, grouped by domain with add/remove indicators) and compact --auto flag (deterministic auto-compaction merging candidate groups with longest-name selection, content joining, foundational promotion, and supersedes tracking). Both features include comprehensive tests.","closedAt":"2026-02-13T21:19:07.332206-08:00"}
{"id":"mulch-0vz","title":"Schema: add bead field to Evidence type + Ajv schema","status":"closed","type":"task","priority":1,"createdAt":"2026-02-13T21:13:42.591414-08:00","updatedAt":"2026-02-13T21:15:37.903084-08:00","assignee":"jayminwest@gmail.com","description":"Part of mulch-8zp. Add optional bead: string to Evidence interface in src/schemas/record.ts. Add bead: { type: 'string' } to evidence definition in src/schemas/record-schema.ts.","closeReason":"Added optional bead field to Evidence interface and Ajv schema","closedAt":"2026-02-13T21:15:37.903084-08:00"}
{"id":"mulch-17s","title":"Document --stdin batch recording workflow","status":"closed","type":"task","priority":3,"createdAt":"2026-02-15T17:01:29.791286-08:00","updatedAt":"2026-02-15T17:41:43.308144-08:00","assignee":"jayminwest@gmail.com","description":"External agent noted friction with parallel recording failing on validation — sibling calls get cancelled when one fails. --stdin exists but wasn't discoverable enough. Either: (1) document the --stdin JSON batch workflow more prominently in README/help, or (2) add a dedicated 'mulch record --batch <file.json>' flag. Source: external agent review.","closeReason":"Added --batch <file> flag to mulch record as discoverable alternative to --stdin. Updated README with Batch Recording section, CLI reference table, format.ts prime output, CHANGELOG, and improved help text with batch examples. All quality gates passed.","closedAt":"2026-02-15T17:41:43.308144-08:00"}
{"id":"mulch-19v","title":"Fix api.ts outcome→outcomes migration (line 245)","status":"closed","type":"bug","priority":0,"createdAt":"2026-02-20T14:02:11.14182-08:00","updatedAt":"2026-02-20T14:18:42.013598-08:00","assignee":"jayminwest@gmail.com","description":"src/api.ts line 245 uses r.outcome?.status but schema migrated to outcomes[]. Same fix pattern as query.ts.","closeReason":"api.ts outcome→outcomes fix merged, reviewer PASS","closedAt":"2026-02-20T14:18:42.013598-08:00"}
{"id":"mulch-1ay","title":"Implement outcome metadata on BaseRecord","status":"closed","type":"task","priority":1,"createdAt":"2026-02-20T11:37:49.564852-08:00","updatedAt":"2026-02-20T11:48:53.407126-08:00","assignee":"jayminwest@gmail.com","description":"Add optional Outcome type to BaseRecord with success/failure, duration, test_results, agent fields. Update schema, record CLI, format, edit, search commands, and tests.","closeReason":"Outcome metadata implementation complete. 430 lines added across 9 files, 16 new tests, all 575 pass.","closedAt":"2026-02-20T11:48:53.407126-08:00"}
{"id":"mulch-1fc","title":"Add dependabot.yml","status":"closed","type":"task","priority":2,"createdAt":"2026-02-13T06:43:24.697401-08:00","updatedAt":"2026-02-13T06:45:31.27786-08:00","assignee":"jayminwest@gmail.com","description":"Create .github/dependabot.yml to auto-create PRs for npm dependency updates (weekly schedule). Also consider adding github-actions ecosystem for workflow updates.","closeReason":"Closed","closedAt":"2026-02-13T06:45:31.27786-08:00"}
{"id":"mulch-26n","title":"mulch prime should accept optional domain argument to scope output","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-09T16:52:43.330753-08:00","updatedAt":"2026-02-09T16:55:03.101817-08:00","assignee":"jayminwest@gmail.com","description":"Currently mulch prime always outputs all domains. Add an optional positional argument (e.g. mulch prime cli) to output only that domain's expertise. Reduces context overload when agents only need one domain. Should validate the domain exists in config and error if not found.","closeReason":"Added optional [domain] positional argument to mulch prime. Validates domain exists in config, errors with available domains if not found. Updated README, .mulch/README, and init template. 4 new tests.","closedAt":"2026-02-09T16:55:03.101817-08:00"}
{"id":"mulch-26t","title":"Add --json output mode to query command","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-20T13:05:37.401192-08:00","updatedAt":"2026-02-20T13:54:04.087573-08:00","assignee":"jayminwest@gmail.com","description":"mulch query currently only outputs formatted markdown. search, status, and prime all support --json for structured output. query should too — return an array of records with all fields including id, type, classification, outcome(s), tags, evidence. This is table-stakes for any programmatic consumer that needs domain records as structured data rather than human-readable text.","closeReason":"query command --json output mode was already implemented. Added 10 comprehensive tests covering success cases, error cases, and all filter combinations in JSON mode. Verified JSON format matches { success, command, domains: [{ domain, records }] }.","closedAt":"2026-02-20T13:54:04.087573-08:00"}
{"id":"mulch-29w","title":"compact --auto --dry-run output too terse","status":"closed","type":"feature","priority":3,"createdAt":"2026-02-17T08:24:45.18885-08:00","updatedAt":"2026-02-17T09:00:41.687796-08:00","assignee":"jayminwest@gmail.com","description":"The --auto dry-run output just says 'Would compact 27 records across 4 groups' with no detail about what it would actually do — which records get merged, what the replacement would look like. Need --json for any detail, and even then it only shows groups, not proposed replacements. A --dry-run should preview the output records.","closeReason":"Fixed: compact --auto --dry-run now shows detailed group preview with domain/type/count/sample records","closedAt":"2026-02-17T09:00:41.687796-08:00"}
{"id":"mulch-2bi","title":"Pattern scoring/weighting by confirmation frequency","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-16T19:07:06.461327-08:00","updatedAt":"2026-02-20T12:05:55.04815-08:00","assignee":"jayminwest@gmail.com","description":"Add frequency-based scoring so patterns used successfully many times rank higher than those recorded once. A pattern confirmed 20 times should surface before one recorded once. Depends on outcome metadata (success/failure fields) being available on records.","closeReason":"Implemented pattern scoring/weighting by confirmation frequency: (1) scoring.ts core module with computeConfirmationScore, applyConfirmationBoost, sortByConfirmationScore (40 tests), (2) budget.ts integration widening DomainRecords to ScoredRecord[] and extending sort key with confirmation score (21 tests), (3) search.ts --sort-by-score flag integration (42 tests). All 3 builders review-verified, merge_ready sent for each.","closedAt":"2026-02-20T12:05:55.04815-08:00"}
{"id":"mulch-2e4","title":"Review: compact test additions v2","status":"closed","type":"task","priority":1,"createdAt":"2026-02-17T08:58:04.644555-08:00","updatedAt":"2026-02-17T09:00:58.945798-08:00","assignee":"jayminwest@gmail.com","closeReason":"Review PASS for compact domain filtering tests","closedAt":"2026-02-17T09:00:58.945798-08:00"}
{"id":"mulch-2jf","title":"Compact prime mode (--compact)","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-09T17:23:16.254507-08:00","updatedAt":"2026-02-09T17:25:39.782813-08:00","assignee":"jayminwest@gmail.com","closeReason":"Closed","closedAt":"2026-02-09T17:25:39.782813-08:00"}
{"id":"mulch-2rb","title":"Implement programmatic API (src/api.ts, src/index.ts, test/api.test.ts)","status":"closed","type":"feature","priority":1,"createdAt":"2026-02-20T13:42:07.344474-08:00","updatedAt":"2026-02-20T13:48:34.867218-08:00","assignee":"jayminwest@gmail.com","description":"Create high-level API functions: recordExpertise, searchExpertise, queryDomain, editRecord. See mail from api-lead for full spec.","closeReason":"Implemented programmatic API: recordExpertise, searchExpertise, queryDomain, editRecord in src/api.ts; updated src/index.ts and src/schemas/index.ts; 26 tests, all 651 suite tests pass","closedAt":"2026-02-20T13:48:34.867218-08:00"}
{"id":"mulch-2vn","title":"Stable hash-based record IDs","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-10T10:14:39.434907-08:00","updatedAt":"2026-02-10T10:35:07.372752-08:00","assignee":"jayminwest@gmail.com","description":"Replace 1-based JSONL line indices with stable short hashes (e.g. mx-a1b2). Current line-index IDs shift when records are deleted or reordered. Agents need stable references to update, link, and discuss specific records across sessions. Generate from content hash or random UUID at record creation time. Edit/delete by hash ID instead of line number.","closeReason":"Added stable hash-based record IDs (mx-XXXXXX). Content-based SHA-256 hashing. Optional id field on BaseRecord + all 6 schema variants. Auto-generated in appendRecord/writeExpertiseFile. Edit command accepts ID or 1-based index. Lazy migration for existing records. 221 tests pass.","closedAt":"2026-02-10T10:35:07.372752-08:00"}
{"id":"mulch-387","title":"Add --batch flag and improve help text for mulch record","status":"closed","type":"task","priority":2,"createdAt":"2026-02-15T17:33:16.933096-08:00","updatedAt":"2026-02-15T17:41:46.559428-08:00","assignee":"jayminwest@gmail.com","description":"Add --batch <file> flag to record command as discoverable alternative to --stdin. Improve help text with batch recording examples. Add tests for --batch.","closeReason":"Added --batch <file> flag to record command with comprehensive tests.","closedAt":"2026-02-15T17:41:46.559428-08:00"}
{"id":"mulch-3eq","title":"Build: outcome metadata implementation","status":"closed","type":"task","priority":1,"createdAt":"2026-02-20T11:14:11.193057-08:00","updatedAt":"2026-02-20T11:49:26.881487-08:00","assignee":"jayminwest@gmail.com","description":"Implement outcome metadata on BaseRecord per spec. Files: record.ts, record-schema.ts, record command, format.ts, record tests.","closeReason":"Duplicate of mulch-bfl, completed as part of outcome metadata implementation.","closedAt":"2026-02-20T11:49:26.881487-08:00"}
{"id":"mulch-3ip","title":"Scout: explore record types, prime sorting, and search scoring","status":"closed","type":"task","priority":2,"createdAt":"2026-02-20T11:34:26.477555-08:00","updatedAt":"2026-02-20T11:38:34.44536-08:00","assignee":"jayminwest@gmail.com","closeReason":"Scout completed: explored record types, prime sorting, search scoring, budget system, and BM25 infrastructure. Findings informed scoring module spec.","closedAt":"2026-02-20T11:38:34.44536-08:00"}
{"id":"mulch-3kg","title":"Deduplication and idempotent recording","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-09T17:01:57.836585-08:00","updatedAt":"2026-02-09T17:08:54.51354-08:00","assignee":"jayminwest@gmail.com","description":"mulch record always appends. Agents calling mulch record at session end will re-discover the same patterns and create duplicates. Need: (1) content-based dedup — skip if similar record exists, (2) named upsert — mulch record --name 'wal-mode' ... updates if exists, creates if not, (3) basic --if-not-exists flag. Without this, re-running seeding scripts or repeated agent sessions cause unbounded growth.","closeReason":"Added dedup to mulch record. Named types (pattern/decision) upsert by name/title. Unnamed types (convention/failure) skip on exact content match. --force flag overrides. 10 new tests.","closedAt":"2026-02-09T17:08:54.51354-08:00"}
{"id":"mulch-3l1","title":"Add CONTRIBUTING.md","status":"closed","type":"task","priority":1,"createdAt":"2026-02-13T06:43:12.156865-08:00","updatedAt":"2026-02-13T06:46:18.270685-08:00","assignee":"jayminwest@gmail.com","description":"Create CONTRIBUTING.md covering: fork/branch workflow, ESM import conventions (.js extensions, Ajv shim), test conventions (no mocks, real filesystems, vitest), build/test commands, commit message style, and PR expectations. Link from README.","closeReason":"Closed","closedAt":"2026-02-13T06:46:18.270685-08:00"}
{"id":"mulch-3m8","title":"Add reference and guide record types","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-09T17:02:00.192715-08:00","updatedAt":"2026-02-09T17:17:07.471479-08:00","assignee":"jayminwest@gmail.com","description":"Current record types (convention/pattern/failure/decision) miss two common expertise categories: (1) key_files / reference — 'this file matters because...' e.g. 'app/src/mcp/tools.ts is the MCP tool definitions file', (2) key_operations / guide — step-by-step procedures like 'how to add an MCP tool'. These are frequently needed by agents and don't map cleanly to existing types.","closeReason":"Closed","closedAt":"2026-02-09T17:17:07.471479-08:00"}
{"id":"mulch-3o1","title":"Add tests for src/index.ts API export","status":"closed","type":"task","priority":2,"createdAt":"2026-02-13T21:46:12.896865-08:00","updatedAt":"2026-02-15T17:41:45.375766-08:00","assignee":"jayminwest@gmail.com","description":"src/index.ts exports types, schemas, and utility functions (readConfig, getExpertisePath, readExpertiseFile, searchRecords, appendRecord, writeExpertiseFile, findDuplicate, generateRecordId) but has no test file. Add test/index.test.ts to verify all exports are importable and key functions work correctly.","closeReason":"Added test/index.test.ts with 20 comprehensive tests covering all exports from src/index.ts: type exports, value exports (DEFAULT_CONFIG, recordSchema), config utilities, expertise utilities, and integration workflow test. All 523 tests pass.","closedAt":"2026-02-15T17:41:45.375766-08:00"}
{"id":"mulch-3x5","title":"Implement outcome metadata on BaseRecord","status":"closed","type":"task","priority":1,"createdAt":"2026-02-20T11:10:18.014048-08:00","updatedAt":"2026-02-20T11:49:27.010273-08:00","assignee":"jayminwest@gmail.com","description":"Add structured outcome data (success/failure, duration, test results, agent, context) to all record types via BaseRecord. Modify record.ts types, record-schema.ts JSON schema, record.ts CLI flags, format.ts display, and record.test.ts tests.","closeReason":"Duplicate of mulch-bfl, completed as part of outcome metadata implementation.","closedAt":"2026-02-20T11:49:27.010273-08:00"}
{"id":"mulch-401","title":"Export functional API from src/index.ts","status":"closed","type":"task","priority":2,"createdAt":"2026-02-13T21:13:43.992153-08:00","updatedAt":"2026-02-13T21:16:04.9381-08:00","assignee":"jayminwest@gmail.com","description":"mulch-ir3. Export readExpertiseFile, searchRecords, appendRecord, writeExpertiseFile, findDuplicate, generateRecordId, readConfig, getExpertisePath, recordSchema from src/index.ts.","closeReason":"Exported core functional API from src/index.ts: readExpertiseFile, searchRecords, appendRecord, writeExpertiseFile, findDuplicate, generateRecordId, readConfig, getExpertisePath, recordSchema. Minor gap: filterByContext, applyBudget, withFileLock not yet exported.","closedAt":"2026-02-13T21:16:04.9381-08:00"}
{"id":"mulch-41r","title":"Add record deletion support","status":"closed","type":"bug","priority":1,"createdAt":"2026-02-10T10:35:22.367087-08:00","updatedAt":"2026-02-10T10:42:23.884773-08:00","assignee":"jayminwest@gmail.com","description":"There is no way to delete a record through the CLI. mulch edit has no --delete flag, and there is no mulch delete command. When an agent creates a junk record or needs to clean up, it has to manually edit the JSONL file. This is an agent-hostile gap. Add either: (a) mulch edit <domain> <index> --delete, or (b) a dedicated mulch delete <domain> <index> command. Should output JSON confirmation of what was deleted.","closeReason":"Added mulch delete command with ID and index support, JSON output, and 5 tests","closedAt":"2026-02-10T10:42:23.884773-08:00"}
{"id":"mulch-42x","title":"Review: query.test.ts fixes","status":"closed","type":"task","priority":0,"createdAt":"2026-02-20T14:15:14.361979-08:00","updatedAt":"2026-02-20T14:18:45.14162-08:00","assignee":"jayminwest@gmail.com","closeReason":"Review complete, test changes structurally correct","closedAt":"2026-02-20T14:18:45.14162-08:00"}
{"id":"mulch-44r","title":"Implement --dry-run flag for mulch record command","status":"closed","type":"task","priority":1,"createdAt":"2026-02-15T17:24:48.354507-08:00","updatedAt":"2026-02-15T17:29:00.456644-08:00","assignee":"jayminwest@gmail.com","description":"Add --dry-run option to mulch record that previews the record without writing to JSONL. Support both CLI and --stdin modes. Follow compact command dry-run pattern.","closeReason":"Implemented --dry-run flag for mulch record command. Supports both CLI and --stdin modes with preview functionality.","closedAt":"2026-02-15T17:29:00.456644-08:00"}
{"id":"mulch-486","title":"Programmatic API for record, search, edit, and query operations","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-20T13:06:06.00881-08:00","updatedAt":"2026-02-20T13:53:11.914958-08:00","assignee":"jayminwest@gmail.com","description":"index.ts exports low-level utilities (readExpertiseFile, appendRecord, searchRecords) but not the high-level operations that CLI commands implement — validation, dedup checking, file locking, atomic writes, outcome handling. Programmatic consumers must reimplement these or shell out to the CLI. Add high-level exported functions that mirror CLI behavior: recordExpertise(domain, record, options), searchExpertise(query, filters), queryDomain(domain, filters), editRecord(domain, id, changes). Each should handle validation, locking, and atomic writes internally.","closeReason":"Programmatic API implemented: recordExpertise, searchExpertise, queryDomain, editRecord in src/api.ts. Types and functions exported from src/index.ts. 26 tests in test/api.test.ts. Reviewer PASS. merge_ready sent.","closedAt":"2026-02-20T13:53:11.914958-08:00"}
{"id":"mulch-4bd","title":"compact --analyze ignores domain argument","status":"closed","type":"bug","priority":2,"createdAt":"2026-02-17T08:24:42.705911-08:00","updatedAt":"2026-02-17T09:00:40.537592-08:00","assignee":"jayminwest@gmail.com","description":"mulch compact cli --analyze ignores the domain argument. It dumps candidates across ALL domains (architecture, agents, typescript, cli, messaging) even though a specific domain was requested. The --analyze output is the full global candidate list.","closeReason":"Fixed: compact --analyze now respects domain argument via domain filtering in handleAnalyze()","closedAt":"2026-02-17T09:00:40.537592-08:00"}
{"id":"mulch-4h4","title":"Enable cross-domain record references in schema and validation","status":"closed","type":"task","priority":1,"createdAt":"2026-02-15T17:14:17.608166-08:00","updatedAt":"2026-02-15T17:17:19.5455-08:00","assignee":"jayminwest@gmail.com","description":"Update linkArray pattern in record-schema.ts to accept domain:mx-hash format, add cross-domain ref tests","closeReason":"Enabled cross-domain record references. Updated schema pattern to accept domain:mx-hash format and added comprehensive tests.","closedAt":"2026-02-15T17:17:19.5455-08:00"}
{"id":"mulch-4lv","title":"Add token budget limit to mulch prime with smart prioritization","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-12T08:45:17.121309-08:00","updatedAt":"2026-02-12T08:58:04.06225-08:00","assignee":"jayminwest@gmail.com","description":"Projects with many mulch records can flood agent context windows. Add a --budget flag (default ~4000 tokens, roughly estimated via char count / 4) that caps prime output size. When the budget would be exceeded, prioritize records in this order: (1) conventions (always shown — these are essential project rules), (2) decisions, (3) patterns, (4) guides, (5) failures, (6) references. Within each type, sort by: foundational > tactical > observational classification, then by recency (newest first). When truncation occurs, show a summary line like '... and N more records across M domains (use --budget <n> to show more)'. The --full and --verbose flags should still respect the budget unless --no-limit is passed.","closeReason":"Closed","closedAt":"2026-02-12T08:58:04.06225-08:00"}
{"id":"mulch-4nt","title":"Add --json flag to all commands","status":"closed","type":"feature","priority":1,"createdAt":"2026-02-10T10:14:27.317199-08:00","updatedAt":"2026-02-10T10:34:49.880955-08:00","assignee":"jayminwest@gmail.com","description":"Every mulch command should support --json for structured output. Currently only prime --mcp gives JSON. Agents need machine-readable output from search, status, query, record, edit, validate, prune — all of them. This is table stakes for agent tooling. Implementation: add a global --json flag, have each command output JSON when set. Keep human-readable as default.","closeReason":"Already implemented — --json flag works on all commands","closedAt":"2026-02-10T10:34:49.880955-08:00"}
{"id":"mulch-4wp","title":"Add file-level locking for concurrent JSONL writes","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-12T07:28:32.758038-08:00","updatedAt":"2026-02-12T07:44:42.427128-08:00","assignee":"jayminwest@gmail.com","description":"Several commands (record upsert, edit, delete, compact, prune) do read→modify→write on JSONL files without locking. Add advisory file locking around writeExpertiseFile() calls to prevent race conditions when parallel agents write to the same domain. Tracks GitHub issue #2. Raised by @freke1981SWE in #1.","closeReason":"Closed","closedAt":"2026-02-12T07:44:42.427128-08:00"}
{"id":"mulch-5fh","title":"Enable delete-branch-on-merge","status":"closed","type":"task","priority":2,"createdAt":"2026-02-13T06:43:20.307683-08:00","updatedAt":"2026-02-13T06:47:33.047769-08:00","assignee":"jayminwest@gmail.com","description":"Enable 'Automatically delete head branches' in GitHub repo settings so merged PR branches are cleaned up. Can be done via: gh api repos/jayminwest/mulch -X PATCH -f delete_branch_on_merge=true","closeReason":"Closed","closedAt":"2026-02-13T06:47:33.047769-08:00"}
{"id":"mulch-613","title":"Migrate outcome to outcomes[] array with append semantics","status":"closed","type":"feature","priority":1,"createdAt":"2026-02-20T13:05:09.310919-08:00","updatedAt":"2026-02-20T13:57:05.001245-08:00","assignee":"jayminwest@gmail.com","description":"Current schema stores outcome?: Outcome (singular) on BaseRecord, but the scoring module (src/utils/scoring.ts) defines ScoredRecord with outcomes?: Outcome[] (array). This mismatch means confirmation-frequency scoring has no persistent backing — scores computed in memory can't survive across sessions. Migrate the schema from singular outcome to outcomes[] array. Needs backward compat: records with existing singular outcome should be read as a 1-element array. New outcomes append, never replace. This is the foundation for all score-based prioritization.","closeReason":"Schema migration complete: BaseRecord.outcome→outcomes[], unified Outcome type, backward-compat normalization, edit appends. 627 tests pass. Reviewer PASS. merge_ready sent for branch overstory/schema-migration-builder/mulch-t3q.","closedAt":"2026-02-20T13:57:05.001245-08:00"}
{"id":"mulch-61k","title":"Add auto-update capability to mulch CLI","status":"closed","type":"task","priority":2,"createdAt":"2026-02-10T14:54:00.642937-08:00","updatedAt":"2026-02-11T15:43:14.230476-08:00","assignee":"jayminwest@gmail.com","description":"mulch should be able to update itself automatically. Two possible approaches: (1) Integrate update checking into the 'doctor' command — doctor already checks project health, so it could also check if a newer version of mulch-cli is available on npm and offer to update. (2) Add a standalone auto-update mechanism that checks for updates periodically (e.g., on mulch prime or any command invocation) and either auto-updates or prompts the user. Consider: npm outdated / npm view mulch-cli version for version checking, npm install -g mulch-cli@latest for updating, frequency of checks (don't slow down every invocation), user opt-out config option.","closeReason":"Implemented version check in doctor + standalone update command","closedAt":"2026-02-11T15:43:14.230476-08:00"}
{"id":"mulch-64b","title":"Add --outcome-status and --sort-by-score filters to query command","status":"closed","type":"feature","priority":3,"createdAt":"2026-02-20T13:05:55.745937-08:00","updatedAt":"2026-02-20T13:54:05.386973-08:00","assignee":"jayminwest@gmail.com","description":"search supports --outcome-status and --sort-by-score but query does not. query is the primary domain-scoped retrieval command and should have filter parity with search. Add --outcome-status success|failure|partial for filtering by outcome history, and --sort-by-score for confirmation-score ordering. This completes the query command as a first-class retrieval interface.","closeReason":"Added --outcome-status and --sort-by-score filters to query command with parity to search command. Both filters applied in JSON and text code paths. 21 new tests added. All quality gates pass.","closedAt":"2026-02-20T13:54:05.386973-08:00"}
{"id":"mulch-64w","title":"Provider-optimized prime output (XML for Claude, plain text for Codex)","status":"closed","type":"feature","priority":3,"createdAt":"2026-02-09T16:37:26.04373-08:00","updatedAt":"2026-02-09T16:42:31.364378-08:00","assignee":"jayminwest@gmail.com","description":"Design spec says Claude gets XML tags, Cursor gets markdown, Codex gets plain text. formatPrimeOutput currently only outputs markdown. Add --format flag or detect provider from setup config.","closeReason":"Added --format flag with xml (Claude-optimized), plain (Codex-optimized), and markdown (default). XML uses proper escaping and Claude-preferred tag structure.","closedAt":"2026-02-09T16:42:31.364378-08:00"}
{"id":"mulch-651","title":"Scout: explore record schema, types, and format for outcome metadata","status":"closed","type":"task","priority":2,"createdAt":"2026-02-20T11:07:36.044014-08:00","updatedAt":"2026-02-20T11:11:52.444504-08:00","assignee":"jayminwest@gmail.com","closeReason":"Scout completed exploration of record schema, types, and format for outcome metadata. Reported field extension checklist and testing patterns.","closedAt":"2026-02-20T11:11:52.444504-08:00"}
{"id":"mulch-6ca","title":"Expand compact prime session close protocol with mulch usage instructions","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-15T17:49:54.587929-08:00","updatedAt":"2026-02-16T19:04:55.06286-08:00","assignee":"jayminwest@gmail.com","description":"The compact (default) mulch prime output is the entrypoint for most agents, but its session close protocol only covers learn/record/sync. Agents shouldn't need --verbose to discover search, prime --context, or other key workflows. Expand the compact session close protocol (and/or add a brief usage section to formatPrimeOutputCompact) so agents get actionable mulch instructions — search, recording, linking evidence — without requiring --verbose. The verbose output has all this, but nobody runs it.","closeReason":"Added Quick Reference section to formatPrimeOutputCompact with search, prime --files, prime --context, record types/evidence, and doctor commands","closedAt":"2026-02-16T19:04:55.06286-08:00"}
{"id":"mulch-6gj","title":"Review: budget.ts scoring integration","status":"closed","type":"task","priority":1,"createdAt":"2026-02-20T11:53:28.218534-08:00","updatedAt":"2026-02-20T11:57:05.084351-08:00","assignee":"jayminwest@gmail.com","description":"Review budget-scoring-builder's changes on branch overstory/budget-scoring-builder/mulch-cyl.","closeReason":"Review PASS: budget.ts scoring integration verified. 21 tests pass, lint clean.","closedAt":"2026-02-20T11:57:05.084351-08:00"}
{"id":"mulch-6iv","title":"Add issue templates","status":"closed","type":"task","priority":1,"createdAt":"2026-02-13T06:43:16.169684-08:00","updatedAt":"2026-02-13T06:45:30.080518-08:00","assignee":"jayminwest@gmail.com","description":"Create .github/ISSUE_TEMPLATE/ with: bug_report.yml (steps to reproduce, expected/actual behavior, mulch version, node version), feature_request.yml (problem statement, proposed solution, alternatives considered), and config.yml to optionally link to discussions.","closeReason":"Closed","closedAt":"2026-02-13T06:45:30.080518-08:00"}
{"id":"mulch-6op","title":"compact --auto: add guardrails to prevent over-aggressive compaction","status":"closed","type":"bug","priority":1,"createdAt":"2026-02-13T21:37:50.190832-08:00","updatedAt":"2026-02-13T21:44:07.649665-08:00","assignee":"jayminwest@gmail.com","description":"compact --auto is dangerously aggressive — compacted 207→25 records in one run, destroying all granularity. Needs guardrails: (1) Add --dry-run flag to preview what auto would do without writing. (2) Add minimum group size threshold (e.g. only compact groups of 5+ by default, configurable via --min-group). (3) Add max records per compaction run (e.g. --max-records 50). (4) Print a summary of what will be compacted before doing it (or require --yes to skip confirmation in non-interactive mode). Files: src/commands/compact.ts, test/commands/compact.test.ts","closeReason":"Added guardrails to compact --auto: --dry-run flag, --min-group option (default 5), --max-records limit (default 50), and confirmation prompts (--yes to skip). Prevents over-aggressive compaction that was destroying granularity.","closedAt":"2026-02-13T21:44:07.649665-08:00"}
{"id":"mulch-74j","title":"Review: programmatic API implementation","status":"closed","type":"task","priority":1,"createdAt":"2026-02-20T13:49:12.21794-08:00","updatedAt":"2026-02-20T13:53:05.868229-08:00","assignee":"jayminwest@gmail.com","description":"Review api-builder work on branch overstory/api-builder/mulch-2rb. Verify src/api.ts, src/index.ts, src/schemas/index.ts, test/api.test.ts against spec.","closeReason":"Scout/review tasks complete for programmatic API feature","closedAt":"2026-02-20T13:53:05.868229-08:00"}
{"id":"mulch-7a5","title":"Review: query filters (mulch-64b)","status":"closed","type":"task","priority":1,"createdAt":"2026-02-20T13:50:07.796523-08:00","updatedAt":"2026-02-20T13:53:56.678856-08:00","assignee":"jayminwest@gmail.com","closeReason":"Review PASS for query --outcome-status and --sort-by-score filters. All quality gates passed.","closedAt":"2026-02-20T13:53:56.678856-08:00"}
{"id":"mulch-7hy","title":"Record compaction (semantic decay)","status":"closed","type":"feature","priority":3,"createdAt":"2026-02-10T10:14:58.841347-08:00","updatedAt":"2026-02-10T10:58:34.647032-08:00","assignee":"jayminwest@gmail.com","description":"Instead of hard-deleting old records via prune, compact them: summarize N old records of the same type into 1 consolidated record. Agent-driven — mulch compact --analyze outputs candidates, agent provides the summary, mulch compact --apply writes it. Mulch does no LLM work, just bookkeeping. Similar to bd compact's analyze/apply workflow. Prevents knowledge loss while keeping context window small.","closeReason":"Implemented mulch compact command with --analyze (finds compaction candidates by type grouping and staleness) and --apply (replaces N records with 1 consolidated record, foundational classification, supersedes links to source IDs). Full JSON mode support. 7 new tests, all 299 passing.","closedAt":"2026-02-10T10:58:34.647032-08:00"}
{"id":"mulch-7pr","title":"Record linking and relations","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-10T10:14:45.404346-08:00","updatedAt":"2026-02-10T10:56:28.641362-08:00","assignee":"jayminwest@gmail.com","description":"Let records reference each other with lightweight semantics: relates_to and supersedes. A failure can link to the pattern that fixed it. A convention can supersede an older convention. Not a full graph — just optional fields on records. Agents can follow knowledge chains: 'this failure led to this pattern' or 'this convention replaced that one'. Requires stable record IDs (mulch-4nt prerequisite: hash IDs).","closeReason":"Implemented relates_to and supersedes optional fields on all record types. Added CLI flags to record and edit commands, schema validation with mx-ID pattern, and rendering in all prime formats (markdown, compact, XML, plain text). 14 new tests, all 292 passing.","closedAt":"2026-02-10T10:56:28.641362-08:00"}
{"id":"mulch-82m","title":"Scout: explore record/search/edit/query command implementations","status":"closed","type":"task","priority":2,"createdAt":"2026-02-20T13:38:15.675049-08:00","updatedAt":"2026-02-20T13:53:05.867617-08:00","assignee":"jayminwest@gmail.com","closeReason":"Scout/review tasks complete for programmatic API feature","closedAt":"2026-02-20T13:53:05.867617-08:00"}
{"id":"mulch-85k","title":"Review: outcome metadata implementation","status":"closed","type":"task","priority":1,"createdAt":"2026-02-20T11:45:36.368676-08:00","updatedAt":"2026-02-20T11:48:54.333552-08:00","assignee":"jayminwest@gmail.com","description":"Review outcome-builder changes on branch overstory/outcome-builder/mulch-1ay. Verify schema types, JSON schema, CLI flags, format output, edit, search, and tests.","closeReason":"Review PASS — quality gates verified, non-blocking nits documented","closedAt":"2026-02-20T11:48:54.333552-08:00"}
{"id":"mulch-8w2","title":"Fix doctor governance warning to show domain names and thresholds","status":"closed","type":"bug","priority":2,"createdAt":"2026-02-17T08:32:03.848538-08:00","updatedAt":"2026-02-17T08:35:30.194914-08:00","assignee":"jayminwest@gmail.com","description":"doctor CLI output never prints check.details for non-pass checks, hiding per-domain governance info","closeReason":"Fixed doctor command output to show check.details for non-pass checks. Details now include per-domain governance information (domain names, record counts, and threshold values). Added test coverage for governance threshold detection.","closedAt":"2026-02-17T08:35:30.194914-08:00"}
{"id":"mulch-8wp","title":"Add mulch learn command","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-10T10:14:43.619618-08:00","updatedAt":"2026-02-10T10:46:11.845581-08:00","assignee":"jayminwest@gmail.com","description":"Session-end helper that outputs changed files from the last commit/diff to help agents decide what to record. Dead simple — no parsing, no inference, no LLM. Just: list changed files, list touched domains (from file paths in existing records), and prompt the agent to record learnings. The agent does the heavy lifting of deciding what's worth recording. Think: git diff --stat but formatted as a nudge.","closeReason":"Added mulch learn command: shows changed files, matches to domains via record files fields, suggests where to record learnings. 6 tests.","closedAt":"2026-02-10T10:46:11.845581-08:00"}
{"id":"mulch-8zp","title":"mulch record --evidence-bead <bead-id>","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-13T21:06:01.747368-08:00","updatedAt":"2026-02-13T21:20:43.826665-08:00","assignee":"jayminwest@gmail.com","description":"Cross-reference beads issues with mulch records. Extend Evidence type in record.ts with optional bead field, add --evidence-bead CLI flag, update Ajv schema. ~30min effort.","closeReason":"Implemented --evidence-bead flag: Evidence type + Ajv schema (evidence-schema-builder) + CLI flag in record.ts (evidence-cli-builder). Tests pass.","closedAt":"2026-02-13T21:20:43.826665-08:00"}
{"id":"mulch-91g","title":"Add --exclude-domain flag to prime command","status":"closed","type":"task","priority":1,"createdAt":"2026-02-13T21:12:14.664393-08:00","updatedAt":"2026-02-13T21:20:11.559321-08:00","assignee":"jayminwest@gmail.com","description":"Add --exclude-domain <domains...> flag to mulch prime. Filter targetDomains array before processing loop.","closeReason":"Implemented --exclude-domain flag for prime command with validation. Tests added.","closedAt":"2026-02-13T21:20:11.559321-08:00"}
{"id":"mulch-926","title":"Scout: explore record schema and outcome metadata integration points","status":"closed","type":"task","priority":2,"createdAt":"2026-02-20T11:34:09.876029-08:00","updatedAt":"2026-02-20T11:48:52.258483-08:00","assignee":"jayminwest@gmail.com","closeReason":"Scout exploration complete — all integration points identified","closedAt":"2026-02-20T11:48:52.258483-08:00"}
{"id":"mulch-94s","title":"Build: integrate scoring boost into search results","status":"closed","type":"task","priority":2,"createdAt":"2026-02-20T11:38:19.970981-08:00","updatedAt":"2026-02-20T12:03:43.985248-08:00","assignee":"jayminwest@gmail.com","description":"Modify search command to optionally boost BM25 results by confirmation score. Update src/commands/search.ts and test/commands/search.test.ts. Depends on scoring.ts core module (mulch-y6q).","closeReason":"Implemented and review-verified: search.ts scoring integration with --sort-by-score flag. merge_ready sent.","closedAt":"2026-02-20T12:03:43.985248-08:00"}
{"id":"mulch-9gb","title":"Fix flaky prune boundary test (tactical 14-day edge)","status":"closed","type":"bug","priority":2,"createdAt":"2026-02-09T17:18:45.208441-08:00","updatedAt":"2026-02-09T17:20:49.425797-08:00","assignee":"jayminwest@gmail.com","description":"test/commands/prune.test.ts 'tactical record exactly at boundary (14 days) is not pruned' fails intermittently. daysAgo(14) plus milliseconds of clock drift makes age 14.0000001, passing the > 14 check. Fix: Math.floor the age-in-days computation in prune so boundary records are treated as exactly N whole days old.","closeReason":"Closed","closedAt":"2026-02-09T17:20:49.425797-08:00"}
{"id":"mulch-9mi","title":"Add SECURITY.md","status":"closed","type":"task","priority":1,"createdAt":"2026-02-13T06:43:18.819022-08:00","updatedAt":"2026-02-13T06:46:19.48946-08:00","assignee":"jayminwest@gmail.com","description":"Create SECURITY.md with: supported versions table, private vulnerability reporting instructions (GitHub security advisories or email), response timeline expectations, and scope (what counts as a security issue for a CLI tool). Important since we already received a public security PR — need a private channel.","closeReason":"Closed","closedAt":"2026-02-13T06:46:19.48946-08:00"}
{"id":"mulch-9ot","title":"Add --json flag to status command with health metrics","status":"closed","type":"task","priority":1,"createdAt":"2026-02-13T21:12:16.678082-08:00","updatedAt":"2026-02-13T21:20:12.657787-08:00","assignee":"jayminwest@gmail.com","description":"Extend status command --json output with domain health metrics: governance utilization, stale_count, type_distribution, classification_distribution, oldest/newest timestamps.","closeReason":"Extended status --json with governance_utilization, stale_count, type_distribution, classification_distribution, oldest/newest timestamps.","closedAt":"2026-02-13T21:20:12.657787-08:00"}
{"id":"mulch-a38","title":"Implement mulch record --stdin (JSON batch input)","status":"closed","type":"task","priority":1,"createdAt":"2026-02-13T21:11:49.394016-08:00","updatedAt":"2026-02-13T21:18:30.652343-08:00","assignee":"jayminwest@gmail.com","description":"Add --stdin flag to record command. Read JSON from stdin (single object or array), validate each against schema, dedup, append with file locking. Export testable processStdinRecords function. Add tests.","closeReason":"Implemented --stdin flag for mulch record: processStdinRecords function with JSON batch input, schema validation, dedup, file locking. 9 tests added.","closedAt":"2026-02-13T21:18:30.652343-08:00"}
{"id":"mulch-ahl","title":"Implement --files flag for mulch prime","status":"closed","type":"task","priority":1,"createdAt":"2026-02-13T21:09:54.835029-08:00","updatedAt":"2026-02-13T21:20:10.269108-08:00","assignee":"jayminwest@gmail.com","description":"Add --files <paths...> option to prime command that filters records by explicit file paths, reusing filterByContext(). See dispatch mail for full spec.","closeReason":"Implemented --files flag for prime command. Reuses filterByContext(), mutually exclusive with --context. Tests pass.","closedAt":"2026-02-13T21:20:10.269108-08:00"}
{"id":"mulch-ahz","title":"Implement compact --auto flag","status":"closed","type":"task","priority":1,"createdAt":"2026-02-13T21:12:33.718143-08:00","updatedAt":"2026-02-13T21:18:51.88203-08:00","assignee":"jayminwest@gmail.com","description":"Add --auto flag to compact command for deterministic auto-compaction. For each candidate group: merge content fields, keep most specific name, set supersedes with old IDs, promote to foundational.","closeReason":"Implemented compact --auto flag: deterministic auto-compaction with mergeRecords for all record types, longest-name selection, content merging, foundational promotion, supersedes tracking, tag/file deduplication. 8 new tests, all 415 tests passing.","closedAt":"2026-02-13T21:18:51.88203-08:00"}
{"id":"mulch-aly","title":"mulch onboard should update existing project configs to match latest prompting","status":"closed","type":"task","priority":2,"createdAt":"2026-02-10T14:56:06.092639-08:00","updatedAt":"2026-02-11T15:35:55.802333-08:00","assignee":"jayminwest@gmail.com","description":"When mulch releases prompting updates (e.g., the messaging sync in 0.2.2), running 'mulch onboard' on a project that was already onboarded should update the agent config snippets (CLAUDE.md sections, .cursorrules, etc.) to match the latest version's prompting. Currently onboard may skip or only append — it should detect stale mulch sections and replace them with the current version's text. This ensures projects stay in sync with upstream prompting improvements without manual editing. Consider: idempotent replacement of mulch-managed sections (using markers like the git hook pattern), version-stamping the injected config so onboard knows when it's outdated, a --check or --dry-run flag to show what would change.","closeReason":"Implemented idempotent onboard with marker-based updates, legacy migration, multi-location detection (.claude/CLAUDE.md), and --check flag. 332 tests pass.","closedAt":"2026-02-11T15:35:55.802333-08:00"}
{"id":"mulch-anz","title":"Scout: examine scoring exports surface","status":"in_progress","type":"task","priority":2,"createdAt":"2026-02-20T14:21:28.203842-08:00","updatedAt":"2026-02-20T14:21:34.633292-08:00","assignee":"jayminwest@gmail.com"}
{"id":"mulch-bdj","title":"Fix prime.ts merge: missing filesToFilter declaration and --files handling","status":"closed","type":"bug","priority":0,"createdAt":"2026-02-13T21:25:06.340493-08:00","updatedAt":"2026-02-13T21:31:59.051622-08:00","assignee":"jayminwest@gmail.com","description":"Auto-resolve merge of files-flag and exclude-domain branches dropped the let filesToFilter declaration and the options.files processing block from prime.ts. The --files option is registered (line 83) and filesToFilter is referenced at lines 145,146,169,170,172,185,186 but never declared. Need to add: (1) let filesToFilter: string[] | undefined before the --context block (~line 131), (2) a block after the --context block that sets filesToFilter = options.files if options.files is provided, (3) mutual exclusion check between --context and --files. This is a merge artifact fix only.","closeReason":"Fixed filesToFilter declaration and --files handling in prime.ts. Merged.","closedAt":"2026-02-13T21:31:59.051622-08:00"}
{"id":"mulch-bdu","title":"Add tests for compact.ts domain filtering and output formatting fixes","status":"closed","type":"task","priority":1,"createdAt":"2026-02-17T08:42:08.222538-08:00","updatedAt":"2026-02-17T09:00:55.78621-08:00","assignee":"jayminwest@gmail.com","closeReason":"Tests added but rejected by reviewer — tests did not call compact functions","closedAt":"2026-02-17T09:00:55.78621-08:00"}
{"id":"mulch-bfl","title":"Structured pattern records with success/failure metadata","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-16T19:07:03.217931-08:00","updatedAt":"2026-02-20T11:49:26.749009-08:00","assignee":"jayminwest@gmail.com","description":"Add structured outcome data to records. Records should support machine-queryable success/failure fields, duration, and test results. Example: 'builder agent completed typescript-refactoring in 12min, all tests passed'. Extends BaseRecord with optional outcome metadata.","closeReason":"Outcome metadata implemented on BaseRecord. 430 lines, 16 new tests, 575 total passing. Merged to main.","closedAt":"2026-02-20T11:49:26.749009-08:00"}
{"id":"mulch-bl7","title":"Review: file and classification filters for search/query","status":"closed","type":"task","priority":1,"createdAt":"2026-02-20T11:14:17.489116-08:00","updatedAt":"2026-02-20T11:18:07.364519-08:00","assignee":"jayminwest@gmail.com","closeReason":"Reviewer session exited without result; lead verified manually by reviewing diffs and running quality gates.","closedAt":"2026-02-20T11:18:07.364519-08:00"}
{"id":"mulch-bsu","title":"Implement BM25 search engine and integrate into mulch search","status":"closed","type":"task","priority":1,"createdAt":"2026-02-15T17:10:07.799522-08:00","updatedAt":"2026-02-15T17:16:13.076882-08:00","assignee":"jayminwest@gmail.com","description":"Create src/utils/bm25.ts with BM25 scoring, update searchRecords in expertise.ts, update search command, write tests","closeReason":"Implemented BM25 search ranking algorithm with configurable parameters (k1=1.5, b=0.75). Updated searchRecords to return results ranked by BM25 score. Added 50 tests covering tokenization, text extraction, and ranking behavior. All quality gates passed.","closedAt":"2026-02-15T17:16:13.076882-08:00"}
{"id":"mulch-btz","title":"Update README and docs with concurrency safety details","status":"closed","type":"task","priority":3,"createdAt":"2026-02-12T07:38:26.170801-08:00","updatedAt":"2026-02-12T07:49:54.233077-08:00","assignee":"jayminwest@gmail.com","description":"After file locking (mulch-4wp), atomic writes (mulch-hnz), and swarm docs (mulch-g54) are implemented, update README.md and any other relevant docs (CLAUDE.md, onboard snippets) to reflect the new concurrency guarantees. Mention: flock-based locking, atomic temp+rename writes, and link to the swarm-safe usage guide.","closeReason":"Updated CLAUDE.md with Concurrency Safety subsection and added concurrency note to onboard snippet in src/commands/onboard.ts","closedAt":"2026-02-12T07:49:54.233077-08:00"}
{"id":"mulch-bw8","title":"Fix compact --analyze and --auto domain filtering, dry-run detail, analyze formatting","status":"closed","type":"bug","priority":2,"createdAt":"2026-02-17T08:32:02.570298-08:00","updatedAt":"2026-02-17T08:36:04.383137-08:00","assignee":"jayminwest@gmail.com","description":"4 bugs in compact.ts: (1) --auto ignores domain arg, (2) --analyze ignores domain arg, (3) --auto --dry-run output too terse, (4) --analyze text output hard to scan","closeReason":"Fixed 4 bugs in compact.ts: domain filtering for --auto and --analyze, detailed dry-run preview, improved analyze output formatting with domain grouping","closedAt":"2026-02-17T08:36:04.383137-08:00"}
{"id":"mulch-c6m","title":"Review: outcome→outcomes[] migration (mulch-t3q)","status":"closed","type":"task","priority":1,"createdAt":"2026-02-20T13:52:59.08318-08:00","updatedAt":"2026-02-20T13:56:34.567945-08:00","assignee":"jayminwest@gmail.com","closeReason":"Review PASS: all quality gates passed (627 tests, clean lint/typecheck). Deviations from spec assessed as improvements.","closedAt":"2026-02-20T13:56:34.567945-08:00"}
{"id":"mulch-cdw","title":"Review: query --json tests (mulch-mvz)","status":"closed","type":"task","priority":1,"createdAt":"2026-02-20T13:46:58.565631-08:00","updatedAt":"2026-02-20T13:53:55.886413-08:00","assignee":"jayminwest@gmail.com","closeReason":"Review PASS for query --json tests. All quality gates passed.","closedAt":"2026-02-20T13:53:55.886413-08:00"}
{"id":"mulch-ck1","title":"Switch to Bun for development while keeping npm for publishing","status":"open","type":"feature","priority":3,"createdAt":"2026-02-21T17:12:22.098553-08:00","updatedAt":"2026-02-21T17:12:34.071308-08:00","assignee":"jayminwest@gmail.com","description":"Migrate development tooling from Node/npm scripts to Bun while continuing to publish to npm registry.\n\nScope:\n- Replace vitest with bun:test for test runner\n- Use bun run for script execution (build, lint, dev)\n- Use bun install for dependency management (bun.lockb replaces package-lock.json)\n- Keep publishing to npm via npm publish (or bun publish)\n- Update CI workflows to install and use bun\n- Update CLAUDE.md and README.md build/test commands\n\nOut of scope:\n- Changing the package registry (stays on npm)\n- Rewriting source code (ESM TypeScript stays the same)\n\nMotivation: Bun is significantly faster for test runs, script execution, and dependency installs."}
{"id":"mulch-cky","title":"Add mulch rank command for top records by confirmation score","status":"open","type":"feature","priority":3,"createdAt":"2026-02-20T13:05:46.594885-08:00","updatedAt":"2026-02-20T13:05:46.594885-08:00","assignee":"jayminwest@gmail.com","description":"New command: mulch rank [domain] [--type <type>] [--limit N] [--min-score <n>]. Returns records sorted by confirmation score (highest first). Useful for context-constrained consumers that want the N most battle-tested records. Supports --json for structured output. Different from search --sort-by-score because it doesn't require a text query — it's pure score-based ranking across a domain. Depends on outcomes[] migration for meaningful scores."}
{"id":"mulch-cyl","title":"Build: integrate scoring into budget.ts priority sorting","status":"closed","type":"task","priority":1,"createdAt":"2026-02-20T11:38:09.811653-08:00","updatedAt":"2026-02-20T12:03:43.029539-08:00","assignee":"jayminwest@gmail.com","description":"Modify src/utils/budget.ts recordSortKey to incorporate outcome-based scores as a factor in record prioritization. Also update test/utils/budget.test.ts. Depends on scoring.ts core module (mulch-y6q).","closeReason":"Implemented and review-verified: budget.ts scoring integration. merge_ready sent.","closedAt":"2026-02-20T12:03:43.029539-08:00"}
{"id":"mulch-d0d","title":"Review: scoring.ts core module + tests","status":"closed","type":"task","priority":1,"createdAt":"2026-02-20T11:43:21.258939-08:00","updatedAt":"2026-02-20T11:46:44.66106-08:00","assignee":"jayminwest@gmail.com","description":"Review scoring-builder's implementation on branch overstory/scoring-builder/mulch-y6q. Verify scoring.ts and scoring.test.ts against spec. Run quality gates.","closeReason":"Review PASS: scoring.ts implementation verified. 40 tests pass, lint clean, correct edge case handling.","closedAt":"2026-02-20T11:46:44.66106-08:00"}
{"id":"mulch-dls","title":"Scout: explore compact.ts and doctor.ts for bugfixes","status":"closed","type":"task","priority":2,"createdAt":"2026-02-17T08:27:47.635615-08:00","updatedAt":"2026-02-17T09:00:51.574056-08:00","assignee":"jayminwest@gmail.com","closeReason":"Scout completed: explored compact.ts and doctor.ts, confirmed 3 bugs","closedAt":"2026-02-17T09:00:51.574056-08:00"}
{"id":"mulch-dsr","title":"Scout: explore outcome schema and usage across codebase","status":"closed","type":"task","priority":2,"createdAt":"2026-02-20T13:38:12.021409-08:00","updatedAt":"2026-02-20T13:45:23.982657-08:00","assignee":"jayminwest@gmail.com","closeReason":"Scout completed: explored outcome schema across 12 files, identified type mismatch between record.ts and scoring.ts, documented in spec","closedAt":"2026-02-20T13:45:23.982657-08:00"}
{"id":"mulch-e0b","title":"mulch prime --files <paths>","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-13T21:05:56.429056-08:00","updatedAt":"2026-02-13T21:20:20.033398-08:00","assignee":"jayminwest@gmail.com","description":"Add --files flag to prime command for explicit file-scope filtering. Reuse existing filterByContext() from src/utils/git.ts. Mutually exclusive with --context (or union). ~15min effort.","closeReason":"All 3 features complete: --files flag (mulch-ahl), --exclude-domain flag (mulch-91g via mulch-k3n), status --json health metrics (mulch-9ot via mulch-eic). All quality gates passed.","closedAt":"2026-02-13T21:20:20.033398-08:00"}
{"id":"mulch-e9p","title":"Make mulch prime default to compact output, add --verbose/-v flag for full output","status":"closed","type":"task","priority":2,"createdAt":"2026-02-10T10:59:49.992919-08:00","updatedAt":"2026-02-10T11:01:21.638147-08:00","assignee":"jayminwest@gmail.com","closeReason":"Closed","closedAt":"2026-02-10T11:01:21.638147-08:00"}
{"id":"mulch-ecu","title":"Record relationships: tags and grouping","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-09T17:02:02.691048-08:00","updatedAt":"2026-02-09T17:26:08.664422-08:00","assignee":"jayminwest@gmail.com","description":"Records are flat and isolated. A decision often explains why a convention exists; a failure often leads to a new pattern. Need at minimum: (1) tags — mulch record database --type convention --tags 'fts5,search' ..., (2) tag-based query — mulch query database --tag fts5, (3) optionally, explicit relationships like 'this failure led to this convention'. Even simple tags would enable cross-cutting queries like 'everything about FTS5'.","closeReason":"Closed","closedAt":"2026-02-09T17:26:08.664422-08:00"}
{"id":"mulch-eic","title":"mulch stats --json domain health metrics","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-13T21:06:06.233225-08:00","updatedAt":"2026-02-13T21:24:13.478473-08:00","assignee":"jayminwest@gmail.com","description":"Extend status JSON output with governance utilization, stale_count (reuse isStale from prune), type_distribution, classification_distribution, oldest/newest record timestamps. ~1hr effort.","closeReason":"Implemented and merged. Exclude-domain branch: overstory/exclude-domain-builder/mulch-91g. Status --json branch: overstory/status-json-builder/mulch-9ot.","closedAt":"2026-02-13T21:24:13.478473-08:00"}
{"id":"mulch-fc5","title":"Scout: explore current API surface (index.ts, utils)","status":"closed","type":"task","priority":2,"createdAt":"2026-02-20T13:38:14.602167-08:00","updatedAt":"2026-02-20T13:53:05.866764-08:00","assignee":"jayminwest@gmail.com","closeReason":"Scout/review tasks complete for programmatic API feature","closedAt":"2026-02-20T13:53:05.866764-08:00"}
{"id":"mulch-feq","title":"mulch prime: multi-domain args and --domain flag form","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-09T17:01:52.838212-08:00","updatedAt":"2026-02-09T17:17:07.451494-08:00","assignee":"jayminwest@gmail.com","description":"Single-domain scoping landed (mulch prime cli), but multi-agent architectures need: (1) multiple domain args: mulch prime database api testing, (2) --domain flag form: mulch prime --domain database. Setup claude hook should support per-agent domain scoping rather than global all-domain priming.","closeReason":"Closed","closedAt":"2026-02-09T17:17:07.451494-08:00"}
{"id":"mulch-g2a","title":"Add FUNDING.yml","status":"closed","type":"task","priority":3,"createdAt":"2026-02-13T06:43:41.513682-08:00","updatedAt":"2026-02-13T06:45:32.499835-08:00","assignee":"jayminwest@gmail.com","description":"Create .github/FUNDING.yml with github: jayminwest to enable the Sponsor button on the repo.","closeReason":"Closed","closedAt":"2026-02-13T06:45:32.499835-08:00"}
{"id":"mulch-g54","title":"Document swarm-safe usage patterns","status":"closed","type":"task","priority":2,"createdAt":"2026-02-12T07:37:05.036058-08:00","updatedAt":"2026-02-12T07:48:23.25649-08:00","assignee":"jayminwest@gmail.com","description":"Add documentation (README section or dedicated doc) covering which mulch commands are safe for parallel agents and which should be serialized. Safe: record (append), prime, search, status, query, validate. Unsafe without locking: record (upsert), edit, delete, compact, prune. Include recommended patterns for same-worktree swarms and multi-worktree setups.","closeReason":"Added 'Concurrency & Multi-Agent Safety' section to README.md covering command safety table, swarm patterns (same-worktree and multi-worktree), locking mechanism, atomic writes, and edge cases.","closedAt":"2026-02-12T07:48:23.25649-08:00"}
{"id":"mulch-gbf","title":"compact --auto ignores domain argument","status":"closed","type":"bug","priority":2,"createdAt":"2026-02-17T08:24:40.506614-08:00","updatedAt":"2026-02-17T09:00:39.119361-08:00","assignee":"jayminwest@gmail.com","description":"mulch compact cli --auto --dry-run ignores the domain argument. Passed 'cli' as the domain but dry-run output showed it would compact 27 records across 4 groups — all in architecture, not cli. The domain arg is silently ignored in --auto mode.","closeReason":"Fixed: compact --auto now respects domain argument via domain filtering in handleAuto()","closedAt":"2026-02-17T09:00:39.119361-08:00"}
{"id":"mulch-gnz","title":"Cross-domain record relationships","status":"closed","type":"feature","priority":4,"createdAt":"2026-02-15T17:01:34.864479-08:00","updatedAt":"2026-02-15T17:18:26.649481-08:00","assignee":"jayminwest@gmail.com","description":"Allow linking records across domains — e.g., linking a storage decision to a services pattern that depends on it. Currently relates_to and supersedes fields exist on records but are intra-domain. Explore cross-domain references like 'architecture:mx-abc123'. Source: external agent review.","closeReason":"Cross-domain record references enabled. Schema pattern updated to accept domain:mx-hash format (e.g. architecture:mx-abc123). 8 new validation tests, all 466 tests pass.","closedAt":"2026-02-15T17:18:26.649481-08:00"}
{"id":"mulch-gqy","title":"Add search/filter to mulch query","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-09T17:01:54.890857-08:00","updatedAt":"2026-02-09T17:08:52.142069-08:00","assignee":"jayminwest@gmail.com","description":"mulch query dumps every record in a domain. Need: (1) mulch query --search 'FTS5' — find across all domains, (2) mulch query database --search 'WAL' — find within domain. For projects with 15+ records per domain, agents shouldn't consume all records to find the one about WAL mode. Currently read-everything-or-nothing.","closeReason":"Added mulch search command with case-insensitive substring matching across all string fields. Supports --domain and --type filters. 10 new tests.","closedAt":"2026-02-09T17:08:52.142069-08:00"}
{"id":"mulch-h9u","title":"Export scoring module from programmatic API","status":"in_progress","type":"feature","priority":2,"createdAt":"2026-02-20T13:05:28.548461-08:00","updatedAt":"2026-02-20T14:19:47.242507-08:00","assignee":"jayminwest@gmail.com","description":"src/utils/scoring.ts exports ScoredRecord, Outcome, computeConfirmationScore, getSuccessRate, sortByConfirmationScore, applyConfirmationBoost, etc. — but none are re-exported from src/index.ts. Programmatic consumers (MCP servers, IDE plugins, custom tooling) must shell out to the CLI to get score data. Export all scoring functions and types from the public API surface."}
{"id":"mulch-haf","title":"Scout: explore test files for outcome-related coverage","status":"closed","type":"task","priority":2,"createdAt":"2026-02-20T13:38:13.144219-08:00","updatedAt":"2026-02-20T13:45:24.996188-08:00","assignee":"jayminwest@gmail.com","closeReason":"Scout completed: explored test coverage for outcome-related code, identified coverage gaps in CLI flag testing","closedAt":"2026-02-20T13:45:24.996188-08:00"}
{"id":"mulch-hdq","title":"Require CI status checks for branch protection","status":"closed","type":"task","priority":2,"createdAt":"2026-02-13T06:43:21.722994-08:00","updatedAt":"2026-02-13T06:47:33.074945-08:00","assignee":"jayminwest@gmail.com","description":"Update main branch protection to require the CI workflow status checks (lint, build, test) to pass before merging. Currently only requires review approval — broken code could be merged with admin override.","closeReason":"Closed","closedAt":"2026-02-13T06:47:33.074945-08:00"}
{"id":"mulch-hnz","title":"Atomic JSONL writes via temp file + rename","status":"closed","type":"task","priority":2,"createdAt":"2026-02-12T07:37:02.231578-08:00","updatedAt":"2026-02-12T07:44:42.449122-08:00","assignee":"jayminwest@gmail.com","description":"Replace direct writeFile() calls in writeExpertiseFile() with temp-file + rename pattern (write to .tmp.PID file, then os.rename to final path). Prevents partial reads when another agent runs mulch prime mid-write. Inspired by beads' approach in cmd/bd/export.go.","closeReason":"Closed","closedAt":"2026-02-12T07:44:42.449122-08:00"}
{"id":"mulch-hyz","title":"Implement --full, --mcp, --export flags for mulch prime","status":"closed","type":"task","priority":2,"createdAt":"2026-02-09T16:37:23.876536-08:00","updatedAt":"2026-02-09T16:39:08.817962-08:00","assignee":"jayminwest@gmail.com","description":"prime.ts declares --full, --mcp, and --export options but the action handler ignores them (_options unused). Implement: --full skips summarization and outputs all entries, --mcp outputs JSON for MCP tool responses, --export writes output to a file path.","closeReason":"Implemented --full (shows classification + evidence), --mcp (JSON output), --export <path> (write to file)","closedAt":"2026-02-09T16:39:08.817962-08:00"}
{"id":"mulch-i5l","title":"BM25 relevance-ranked search for mulch search","status":"closed","type":"feature","priority":4,"createdAt":"2026-02-15T17:01:33.092566-08:00","updatedAt":"2026-02-15T17:18:22.139252-08:00","assignee":"jayminwest@gmail.com","description":"Replace substring matching in 'mulch search' with BM25 ranking. Implement from scratch in ~100-150 lines of TypeScript — no new dependencies. Tokenize record text fields, compute term frequency / inverse document frequency, rank results by BM25 score. Weight fields: name/title > description > context. Add simple suffix stemming for better recall. No embeddings, no LLM dependency. Source: external agent review + design discussion.","closeReason":"BM25 search implemented in src/utils/bm25.ts. searchRecords now returns relevance-ranked results using BM25 scoring with configurable k1/b parameters. 25 new tests, all 491 tests pass.","closedAt":"2026-02-15T17:18:22.139252-08:00"}
{"id":"mulch-ibz","title":"Fix query.test.ts: add vi import and update outcome-status tests","status":"closed","type":"bug","priority":0,"createdAt":"2026-02-20T14:07:12.570964-08:00","updatedAt":"2026-02-20T14:15:12.63487-08:00","assignee":"jayminwest@gmail.com","description":"Two fixes needed: (1) Add vi to vitest import line. (2) Update outcome-status filtering tests to use outcomes[] array instead of old outcome singular field, and test via program.parseAsync CLI path.","closeReason":"Test fixes committed: added vi import, registerQueryCommand import, rewrote outcome-status tests for outcomes[] schema","closedAt":"2026-02-20T14:15:12.63487-08:00"}
{"id":"mulch-ir3","title":"Export functional API from src/index.ts","status":"closed","type":"feature","priority":3,"createdAt":"2026-02-13T21:06:03.413773-08:00","updatedAt":"2026-02-13T21:20:44.715358-08:00","assignee":"jayminwest@gmail.com","description":"Export key functions (readExpertiseFile, searchRecords, appendRecord, filterByContext, applyBudget, readConfig, etc.) from src/index.ts for library usage. Document stability guarantees. Caveat: Bun compatibility and zero-dep rules for some consumers. ~30min effort.","closeReason":"Exported functional API from src/index.ts: readExpertiseFile, searchRecords, appendRecord, writeExpertiseFile, findDuplicate, generateRecordId, readConfig, getExpertisePath, recordSchema.","closedAt":"2026-02-13T21:20:44.715358-08:00"}
{"id":"mulch-isp","title":"Export scoring module from src/index.ts + tests","status":"open","type":"task","priority":1,"createdAt":"2026-02-20T14:21:29.778308-08:00","updatedAt":"2026-02-20T14:21:29.778308-08:00","assignee":"jayminwest@gmail.com"}
{"id":"mulch-izw","title":"mulch init should be idempotent — re-run initMulchDir even when .mulch/ exists","status":"closed","type":"task","priority":2,"createdAt":"2026-02-09T16:31:59.306989-08:00","updatedAt":"2026-02-09T16:35:33.440758-08:00","assignee":"jayminwest@gmail.com","description":"Currently `mulch init` bails early with '.mulch/ already exists' if the directory is present. This means newly added init-time artifacts (like .gitattributes merge=union line or .mulch/README.md) don't get created for existing projects. The init command should re-run initMulchDir() to fill in missing pieces idempotently, since initMulchDir() already handles all the skip-if-present logic internally.","closeReason":"Made init idempotent — always runs initMulchDir, skips config/readme overwrite if already present","closedAt":"2026-02-09T16:35:33.440758-08:00"}
{"id":"mulch-j1x","title":"Review: search.ts scoring integration","status":"closed","type":"task","priority":1,"createdAt":"2026-02-20T12:01:02.335374-08:00","updatedAt":"2026-02-20T12:03:41.54123-08:00","assignee":"jayminwest@gmail.com","description":"Review search-scoring-builder-2's changes on branch overstory/search-scoring-builder-2/mulch-94s.","closeReason":"Review PASS: search.ts scoring integration verified. 42 tests pass, lint clean.","closedAt":"2026-02-20T12:03:41.54123-08:00"}
{"id":"mulch-jam","title":"Make search query optional for type-only filtering","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-09T17:23:17.191249-08:00","updatedAt":"2026-02-09T17:25:39.894799-08:00","assignee":"jayminwest@gmail.com","closeReason":"Closed","closedAt":"2026-02-09T17:25:39.894799-08:00"}
{"id":"mulch-jld","title":"Implement file and classification filters for search/query","status":"closed","type":"task","priority":2,"createdAt":"2026-02-20T11:08:59.378245-08:00","updatedAt":"2026-02-20T11:18:07.211061-08:00","assignee":"jayminwest@gmail.com","closeReason":"Implemented filterByClassification and filterByFile in expertise.ts, added --classification and --file options to search and query commands, 28 new tests. All quality gates pass.","closedAt":"2026-02-20T11:18:07.211061-08:00"}
{"id":"mulch-jou","title":"mulch compact --auto","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-13T21:06:05.084411-08:00","updatedAt":"2026-02-13T21:19:08.128576-08:00","assignee":"jayminwest@gmail.com","description":"Deterministic auto-compaction (no LLM). For each candidate group: merge content fields, keep most specific name, set supersedes with old IDs, promote to foundational. Candidate detection already exists via --analyze. ~2hr effort.","closeReason":"Implemented via compact --auto flag in mulch-ahz subtask","closedAt":"2026-02-13T21:19:08.128576-08:00"}
{"id":"mulch-k3n","title":"mulch prime --exclude-domain <domains>","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-13T21:05:58.431113-08:00","updatedAt":"2026-02-13T21:24:13.476236-08:00","assignee":"jayminwest@gmail.com","description":"Add --exclude-domain flag to prime command for negative domain filtering. Filter targetDomains array before processing loop. ~10min effort.","closeReason":"Implemented and merged. Exclude-domain branch: overstory/exclude-domain-builder/mulch-91g. Status --json branch: overstory/status-json-builder/mulch-9ot.","closedAt":"2026-02-13T21:24:13.476236-08:00"}
{"id":"mulch-k9j","title":"Add mulch doctor command","status":"closed","type":"feature","priority":1,"createdAt":"2026-02-10T10:14:30.057166-08:00","updatedAt":"2026-02-10T10:37:17.612295-08:00","assignee":"jayminwest@gmail.com","description":"Single command for all health checks with --fix to auto-repair. Consolidates: schema validation (currently validate), stale record detection, orphaned domain detection, duplicate detection, config verification, JSONL integrity checks. Like bd doctor — one discoverable place for all health operations. Agents run mulch doctor and know if everything is healthy. --fix repairs what it can automatically.","closeReason":"Added mulch doctor with 7 health checks (config, JSONL integrity, schema validation, stale records, orphaned domains, duplicates, governance) and --fix auto-repair. Supports --json.","closedAt":"2026-02-10T10:37:17.612295-08:00"}
{"id":"mulch-kl0","title":"Add mulch edit command for modifying existing records","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-09T16:37:25.230685-08:00","updatedAt":"2026-02-09T16:40:44.561897-08:00","assignee":"jayminwest@gmail.com","description":"Currently records are append-only with no way to modify. Add 'mulch edit <domain> <record-id>' to update fields on an existing entry. Must preserve the JSONL format (rewrite the line in place).","closeReason":"Added mulch edit command with support for all record types, classification updates, and schema validation. 7 tests.","closedAt":"2026-02-09T16:40:44.561897-08:00"}
{"id":"mulch-md3","title":"Fix prime.ts: add filesToFilter declaration and --files handling","status":"closed","type":"task","priority":0,"createdAt":"2026-02-13T21:26:47.731287-08:00","updatedAt":"2026-02-13T21:30:58.779057-08:00","assignee":"jayminwest@gmail.com","closeReason":"Fixed filesToFilter declaration and --files handling in prime.ts, added test","closedAt":"2026-02-13T21:30:58.779057-08:00"}
{"id":"mulch-mvz","title":"Add --json output mode tests to query command","status":"closed","type":"task","priority":1,"createdAt":"2026-02-20T13:40:45.013976-08:00","updatedAt":"2026-02-20T13:53:54.829004-08:00","assignee":"jayminwest@gmail.com","description":"Add test coverage for the --json output mode of the query command. The implementation already exists in src/commands/query.ts but test/commands/query.test.ts has zero coverage for JSON output.","closeReason":"Added 10 tests for --json output mode in query command. Tests cover single domain, --all, empty domains, error cases, and all filter combinations in JSON mode. Reviewed and verified.","closedAt":"2026-02-20T13:53:54.829004-08:00"}
{"id":"mulch-ppe","title":"Add mulch outcome command for appending outcomes to records","status":"open","type":"feature","priority":1,"createdAt":"2026-02-20T13:05:19.51344-08:00","updatedAt":"2026-02-20T13:05:19.51344-08:00","assignee":"jayminwest@gmail.com","description":"New command: mulch outcome <domain> <id> --status success|failure|partial [--duration <s>] [--agent <name>] [--notes <text>]. Appends an outcome to the record's outcomes[] array (depends on outcomes[] migration). Append-only — never replaces existing outcomes. Uses file locking and atomic writes like other write commands. Supports --json for structured output. This is how agents close the feedback loop: apply a pattern, report the result, build confidence scores over time."}
{"id":"mulch-q0m","title":"Add README badges","status":"closed","type":"task","priority":2,"createdAt":"2026-02-13T06:43:23.257161-08:00","updatedAt":"2026-02-13T06:46:21.037472-08:00","assignee":"jayminwest@gmail.com","description":"Add shields.io badges to the top of README.md: npm version, CI status (GitHub Actions), license (MIT), node version requirement (>=18). Signals project health to potential contributors.","closeReason":"Closed","closedAt":"2026-02-13T06:46:21.037472-08:00"}
{"id":"mulch-q5p","title":"Add session-end reminder section to mulch prime output","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-12T08:45:11.292823-08:00","updatedAt":"2026-02-12T08:58:04.038424-08:00","assignee":"jayminwest@gmail.com","description":"mulch prime should include a prominent, urgent 'Session Close Protocol' section at the bottom (matching bd prime's urgency level with 🚨 markers and CRITICAL/NEVER language). This reminds agents to record learnings before ending their session. The section should include: (1) A CRITICAL header making clear agents MUST run this before saying 'done', (2) a checklist: review work for insights, mulch record command template, mulch validate, git add .mulch/ && git commit, (3) 'NEVER skip this' reinforcement. This should appear in all non-MCP/JSON output formats (compact, verbose, xml, plain). Model it directly after bd prime's session close protocol tone and formatting.","closeReason":"Closed","closedAt":"2026-02-12T08:58:04.038424-08:00"}
{"id":"mulch-qwd","title":"CLI: add --evidence-bead flag to record command","status":"closed","type":"task","priority":1,"createdAt":"2026-02-13T21:18:38.813352-08:00","updatedAt":"2026-02-13T21:20:41.220648-08:00","assignee":"jayminwest@gmail.com","description":"Add --evidence-bead <bead-id> option to mulch record command. When provided, include bead field in the evidence object. Part of mulch-8zp. The Evidence type already has bead?: string (from evidence-schema-builder). Builder must also add the bead field to Evidence type and schema if not present.","closeReason":"Added --evidence-bead CLI flag, updated Evidence type and schema, added 5 tests","closedAt":"2026-02-13T21:20:41.220648-08:00"}
{"id":"mulch-r02","title":"Advanced search/query with file type and task type filters","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-16T19:07:05.636975-08:00","updatedAt":"2026-02-20T11:18:33.46924-08:00","assignee":"jayminwest@gmail.com","description":"Extend search and query to support richer filtering that combines file type, task category, and outcome into a single query. Example: 'what patterns apply to .ts files during refactoring tasks?' Currently search supports domain/type/tag filters but cannot cross-reference file types or task categories.","closeReason":"Added --classification and --file filters to search and query commands. 28 new tests, 559 total passing. Merged to main.","closedAt":"2026-02-20T11:18:33.46924-08:00"}
{"id":"mulch-s5a","title":"Doctor check: migrate legacy outcome to outcomes[] on disk","status":"open","type":"task","priority":2,"createdAt":"2026-02-20T14:22:28.498799-08:00","updatedAt":"2026-02-20T14:22:28.498799-08:00","assignee":"jayminwest@gmail.com","description":"readExpertiseFile normalizes legacy singular outcome to outcomes[] at read time, but JSONL files on disk still contain the old format. Add a doctor check that detects records with the old outcome field and a --fix action that rewrites them to outcomes[]. Also make mulch validate aware of the legacy format so it can report it as a warning rather than a hard error."}
{"id":"mulch-sfb","title":"Review: compact.ts 4-bug fix","status":"closed","type":"task","priority":1,"createdAt":"2026-02-17T08:37:34.953597-08:00","updatedAt":"2026-02-17T09:00:54.460425-08:00","assignee":"jayminwest@gmail.com","closeReason":"Review: compact implementation correct, tests missing — spawned test builder","closedAt":"2026-02-17T09:00:54.460425-08:00"}
{"id":"mulch-svw","title":"Review: doctor governance warning fix","status":"closed","type":"task","priority":1,"createdAt":"2026-02-17T08:35:51.0338-08:00","updatedAt":"2026-02-17T09:00:53.135913-08:00","assignee":"jayminwest@gmail.com","closeReason":"Review PASS for doctor governance warning fix","closedAt":"2026-02-17T09:00:53.135913-08:00"}
{"id":"mulch-t0d","title":"Add --dry-run / preview mode for mulch record","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-15T17:01:27.332582-08:00","updatedAt":"2026-02-15T17:30:58.404617-08:00","assignee":"jayminwest@gmail.com","description":"No way to preview what a record will look like before committing it. Add --dry-run flag to 'mulch record' that shows the formatted record output without writing to the JSONL file. Follows existing dry-run pattern from compact command. Source: external agent review.","closeReason":"Implemented --dry-run flag for mulch record command. Added dry-run support for both CLI and --stdin modes. 4 new tests, all 52 record tests passing. Builder: record-dry-run-builder on branch overstory/record-dry-run-builder/mulch-44r.","closedAt":"2026-02-15T17:30:58.404617-08:00"}
{"id":"mulch-t3q","title":"Implement outcome→outcomes[] migration across all source and test files","status":"closed","type":"task","priority":1,"createdAt":"2026-02-20T13:44:38.039866-08:00","updatedAt":"2026-02-20T13:52:54.49422-08:00","assignee":"jayminwest@gmail.com","description":"Migrate BaseRecord from outcome?: Outcome (singular) to outcomes?: Outcome[] (array). Update record-schema.ts, expertise.ts normalization, commands, format.ts, and all tests.","closeReason":"Migrated BaseRecord.outcome (singular) to outcomes[] (array) across all source files and tests. Added backward-compat normalization in readExpertiseFile. All 627 tests pass.","closedAt":"2026-02-20T13:52:54.49422-08:00"}
{"id":"mulch-tpy","title":"Add real compact domain filtering tests (on compact-builder branch)","status":"closed","type":"task","priority":1,"createdAt":"2026-02-17T08:50:20.07596-08:00","updatedAt":"2026-02-17T09:00:57.330122-08:00","assignee":"jayminwest@gmail.com","closeReason":"Added proper domain filtering tests; review PASS","closedAt":"2026-02-17T09:00:57.330122-08:00"}
{"id":"mulch-tul","title":"Context-aware priming","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-10T10:14:48.333205-08:00","updatedAt":"2026-02-10T10:51:17.075736-08:00","assignee":"jayminwest@gmail.com","description":"mulch prime --context reads current git diff or staged files and filters expertise to only records relevant to those files. Keep it simple: match record file paths against changed files. No intent parsing, no semantic analysis. Just file-path intersection. If a record's files field mentions src/commands/record.ts and that file is in the diff, include it. Reduces context window waste without over-engineering.","closeReason":"Implemented --context flag on mulch prime. Extracts getChangedFiles/isGitRepo to src/utils/git.ts shared utility. filterByContext keeps records without files field (conventions, failures, decisions, guides) and filters pattern/reference records by file-path intersection with git changed files. 14 new tests, 278 total passing.","closedAt":"2026-02-10T10:51:17.075736-08:00"}
{"id":"mulch-utv","title":"record --stdin: infer type from JSON body, default classification to tactical","status":"closed","type":"bug","priority":1,"createdAt":"2026-02-13T21:37:44.991023-08:00","updatedAt":"2026-02-13T21:44:51.946509-08:00","assignee":"jayminwest@gmail.com","description":"Two bugs in record --stdin mode: (1) --type is makeOptionMandatory() so stdin mode requires it even when the JSON body already contains a type field. Should infer type from JSON when --type is not provided on CLI. (2) processStdinRecords does not default classification to tactical like the normal record path does (line 139). When classification is missing from JSON body, it should default to tactical. Files: src/commands/record.ts, test/commands/record.test.ts","closeReason":"Both bug fixes implemented and verified: (1) stdin-fix-builder fixed record --stdin type inference and classification defaulting (mulch-007). (2) compact-builder added guardrails to compact --auto with --dry-run, --min-group, --max-records, --yes flags (mulch-6op). All quality gates pass.","closedAt":"2026-02-13T21:44:51.946509-08:00"}
{"id":"mulch-uzj","title":"Document batch recording workflow in README and prime output","status":"closed","type":"task","priority":2,"createdAt":"2026-02-15T17:33:18.962375-08:00","updatedAt":"2026-02-15T17:41:48.098817-08:00","assignee":"jayminwest@gmail.com","description":"Add Batch Recording section to README. Update format.ts prime output to mention --batch. Update CHANGELOG.","closeReason":"Updated README, CHANGELOG, and format.ts with batch recording documentation.","closedAt":"2026-02-15T17:41:48.098817-08:00"}
{"id":"mulch-vi1","title":"compact --analyze text output hard to scan","status":"closed","type":"feature","priority":4,"createdAt":"2026-02-17T08:24:47.852267-08:00","updatedAt":"2026-02-17T09:00:44.357351-08:00","assignee":"jayminwest@gmail.com","description":"mulch compact --analyze without --json produces a wall of text that's hard to scan. Grouping by domain with record counts inline would help. The JSON output is actually more readable than the text output currently.","closeReason":"Fixed: compact --analyze text output now groups by domain with headers for better readability","closedAt":"2026-02-17T09:00:44.357351-08:00"}
{"id":"mulch-vvh","title":"Fix query.ts outcome to outcomes[] compat after merge","status":"closed","type":"bug","priority":0,"createdAt":"2026-02-20T13:58:03.172727-08:00","updatedAt":"2026-02-20T14:19:05.074941-08:00","assignee":"jayminwest@gmail.com","description":"query.ts lines 80 and 104 use r.outcome?.status but schema migration changed the field to outcomes?: Outcome[]. Fix to use r.outcomes?.some((o) => o.status === ...) pattern matching search.ts.","closeReason":"Fixed outcome→outcomes[] migration: query.ts (2 lines), api.ts (RecordUpdates + editRecord), query.test.ts (vi import + outcome tests). 3 branches merge_ready, all reviewed.","closedAt":"2026-02-20T14:19:05.074941-08:00"}
{"id":"mulch-wj9","title":"Fix query.ts outcome to outcomes[] migration","status":"closed","type":"task","priority":0,"createdAt":"2026-02-20T13:59:16.140858-08:00","updatedAt":"2026-02-20T14:18:40.557775-08:00","assignee":"jayminwest@gmail.com","description":"Fix 2 lines in query.ts: lines 80 and 104 use r.outcome?.status but schema migrated to outcomes[]. Change to r.outcomes?.some((o) => o.status === ...)","closeReason":"query.ts outcome→outcomes fix merged, verified by reviewer","closedAt":"2026-02-20T14:18:40.557775-08:00"}
{"id":"mulch-x5r","title":"Add mulch ready command","status":"closed","type":"feature","priority":1,"createdAt":"2026-02-10T10:14:33.234457-08:00","updatedAt":"2026-02-10T10:37:17.756714-08:00","assignee":"jayminwest@gmail.com","description":"Shows recently added/updated knowledge entries. Dead simple — no intent parsing, no domain inference, no smart context. Just answers: what's new or changed in expertise since last session? Sort by updated_at descending, show the most recent N records. Agents see what knowledge was captured recently and can build on it. Think git log for expertise.","closeReason":"Added mulch ready showing recent expertise entries sorted by recorded_at. Options: --limit, --domain, --since (duration parser). Supports --json.","closedAt":"2026-02-10T10:37:17.756714-08:00"}
{"id":"mulch-y3w","title":"Quality-based governance beyond time expiry","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-09T17:02:05.204035-08:00","updatedAt":"2026-02-20T13:09:07.2654-08:00","assignee":"jayminwest@gmail.com","description":"Governance is time-based only: tactical expires at 14 days, observational at 30. No way to mark a record as superseded, deprecated, or low-confidence. Time is a poor proxy for relevance — a 2-day-old observational record might be noise, while a 60-day-old tactical record might still be critical. Need: (1) manual status flags (superseded, deprecated, low-confidence), (2) ability to mark records as still-relevant to override time-based expiry, (3) prune should consider quality signals not just age.","closeReason":"Part A (supersede chains) is fully implemented: --supersedes flag on record/edit, schema support, compact auto-linking, format display. Parts B (evidence grounding) and C (access-based decay) can be standalone issues if needed later.","closedAt":"2026-02-20T13:09:07.2654-08:00"}
{"id":"mulch-y6q","title":"Build: scoring.ts core module + tests","status":"closed","type":"task","priority":1,"createdAt":"2026-02-20T11:37:34.79028-08:00","updatedAt":"2026-02-20T11:42:44.319122-08:00","assignee":"jayminwest@gmail.com","description":"Create src/utils/scoring.ts with confirmation-frequency scoring functions and test/utils/scoring.test.ts with comprehensive tests. See dispatch mail for full spec.","closeReason":"Implemented src/utils/scoring.ts with confirmation-frequency scoring functions and test/utils/scoring.test.ts with 40 comprehensive tests. Exports Outcome interface, ScoredRecord type, and 7 scoring functions. All quality gates passed.","closedAt":"2026-02-20T11:42:44.319122-08:00"}
{"id":"mulch-yn2","title":"Add PR template","status":"closed","type":"task","priority":1,"createdAt":"2026-02-13T06:43:13.771113-08:00","updatedAt":"2026-02-13T06:45:28.945878-08:00","assignee":"jayminwest@gmail.com","description":"Create .github/pull_request_template.md with sections for: Summary (bullet points), Changes (files/areas affected), Test plan (checklist), and a reminder to run npm test and npm run lint.","closeReason":"Closed","closedAt":"2026-02-13T06:45:28.945878-08:00"}
{"id":"mulch-ypd","title":"mulch record --stdin (JSON batch input)","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-13T21:05:57.198199-08:00","updatedAt":"2026-02-13T21:21:03.485711-08:00","assignee":"jayminwest@gmail.com","description":"Add --stdin flag to record command for programmatic JSON input. Support single object or array. Run through existing validateRecord/findDuplicate/appendRecord with file locking. ~1hr effort.","closeReason":"Completed all 3 features in work stream: (1) --stdin JSON batch input for record command with processStdinRecords exported function + 9 tests, (2) --evidence-bead flag with Evidence type/schema updates + 5 tests, (3) functional API export from src/index.ts. 4 builder branches ready for merge.","closedAt":"2026-02-13T21:21:03.485711-08:00"}
{"id":"mulch-z44","title":"Show required fields per record type in --help","status":"closed","type":"feature","priority":2,"createdAt":"2026-02-15T17:01:25.334285-08:00","updatedAt":"2026-02-15T17:13:13.299859-08:00","assignee":"jayminwest@gmail.com","description":"Required fields per record type aren't discoverable until you fail validation. Decisions need --title and --rationale, references need --name, patterns need --name — users have to error their way through each one. Add a table to 'mulch record --help' showing required fields per type. Source: external agent review.","closeReason":"Implemented required-fields-per-type table in record --help. Builder spawned, code verified, all 460 tests pass. Branch overstory/record-help-builder/mulch-zen ready for merge.","closedAt":"2026-02-15T17:13:13.299859-08:00"}
{"id":"mulch-zen","title":"Add required-fields-per-type table to mulch record --help","status":"closed","type":"task","priority":2,"createdAt":"2026-02-15T17:09:44.507875-08:00","updatedAt":"2026-02-15T17:13:11.112019-08:00","assignee":"jayminwest@gmail.com","description":"Add addHelpText('after', ...) to the record command showing which flags are required for each record type. Add a test verifying the help text content.","closeReason":"Added required-fields-per-type table to mulch record --help. Users can now see which flags are required for each record type without trial-and-error validation errors.","closedAt":"2026-02-15T17:13:11.112019-08:00"}
{"id":"mulch-zre","title":"Implement mulch diff command","status":"closed","type":"task","priority":1,"createdAt":"2026-02-13T21:10:41.160282-08:00","updatedAt":"2026-02-13T21:18:49.37261-08:00","assignee":"jayminwest@gmail.com","description":"Create src/commands/diff.ts with parseExpertiseDiff and formatDiffOutput exports, register in src/cli.ts, add test/commands/diff.test.ts","closeReason":"Implemented mulch diff command: parseExpertiseDiff, formatDiffOutput, registerDiffCommand in src/commands/diff.ts, registered in cli.ts, 12 tests in test/commands/diff.test.ts. All 419 tests passing.","closedAt":"2026-02-13T21:18:49.37261-08:00"}
{"id":"mulch-zxk","title":"Review: api.ts outcome→outcomes fix","status":"closed","type":"task","priority":0,"createdAt":"2026-02-20T14:07:13.383695-08:00","updatedAt":"2026-02-20T14:18:43.681766-08:00","assignee":"jayminwest@gmail.com","closeReason":"Review complete, PASS for api.ts fix","closedAt":"2026-02-20T14:18:43.681766-08:00"}
{"id":"mulch-zyf","title":"Batch: compact/doctor bugfixes and UX improvements","status":"closed","type":"task","priority":2,"createdAt":"2026-02-17T08:27:06.956521-08:00","updatedAt":"2026-02-17T09:04:37.750106-08:00","assignee":"jayminwest@gmail.com","description":"Umbrella issue for 5 sub-tasks: mulch-gbf (compact --auto ignores domain), mulch-4bd (compact --analyze ignores domain), mulch-29w (dry-run output too terse), mulch-0c2 (doctor governance warning lacks domain name), mulch-vi1 (compact --analyze text output hard to scan). File areas: src/commands/compact.ts + test, src/commands/doctor.ts + test.","closeReason":"All 5 sub-issues completed and merged: compact domain filtering (mulch-gbf, mulch-4bd), dry-run detail (mulch-29w), analyze grouping (mulch-vi1), doctor detail display (mulch-0c2). All tests pass.","closedAt":"2026-02-17T09:04:37.750106-08:00"}
{"id":"seeds-6ab5","title":"Add shell completion support","status":"open","type":"feature","priority":3,"createdAt":"2026-02-24T03:30:12.834Z","updatedAt":"2026-02-24T03:30:12.834Z","description":"Add shell completion generation (bash, zsh, fish) via Commander's built-in completion support or a --completions flag. Currently no tab-completion support exists."}
{"id":"seeds-66ea","title":"Standardize prime command flags","status":"open","type":"feature","priority":2,"createdAt":"2026-02-24T03:30:15.510Z","updatedAt":"2026-02-24T03:30:15.510Z","description":"The prime command currently supports --verbose, --full, --format, --files, --context. For ecosystem consistency, also add --compact as an alias or mode (other tools in the ecosystem use --compact for condensed output). Ensure --format supports at minimum: markdown, plain, xml, json."}
{"id":"seeds-201f","title":"Error messages should suggest next action when domain not found","status":"open","type":"bug","priority":2,"createdAt":"2026-02-24T13:43:31.857Z","updatedAt":"2026-02-24T13:43:31.857Z"}
{"id":"seeds-4f58","title":"Show required flags for record type in validation errors","status":"open","type":"bug","priority":2,"createdAt":"2026-02-24T13:43:34.720Z","updatedAt":"2026-02-24T13:43:34.720Z"}
{"id":"seeds-9a44","title":"Auto-create domain on first mulch record if domain doesn't exist","status":"open","type":"feature","priority":2,"createdAt":"2026-02-24T13:43:38.058Z","updatedAt":"2026-02-24T13:43:38.058Z"}
{"id":"seeds-b214","title":"Include per-type required fields in mulch prime recording instructions","status":"open","type":"feature","priority":2,"createdAt":"2026-02-24T13:43:40.455Z","updatedAt":"2026-02-24T13:43:40.455Z"}
