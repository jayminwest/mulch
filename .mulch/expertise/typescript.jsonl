{"type":"convention","content":"All relative imports must end with .js extension (NodeNext module resolution). import { foo } from './bar.js' — not './bar' or './bar.ts'. Build will succeed without it but runtime will fail.","classification":"tactical","recorded_at":"2026-02-10T19:02:56.112Z","id":"mx-a064b1"}
{"type":"convention","content":"Ajv must be imported with ESM/CJS interop shim: import _Ajv from 'ajv'; const Ajv = _Ajv.default ?? _Ajv; — direct 'import Ajv from ajv' fails at runtime in ESM.","classification":"tactical","recorded_at":"2026-02-10T19:02:58.279Z","id":"mx-c8ab6c"}
{"type":"convention","content":"JSON schemas must live in .ts files (exported const), never .json files. tsc does not copy .json to dist/, so runtime import of a .json schema will 404.","classification":"tactical","recorded_at":"2026-02-10T19:03:00.467Z","id":"mx-5baadf"}
{"type":"convention","content":"Use process.exitCode = 1 instead of process.exit(1). Hard exit kills Vitest and prevents cleanup. exitCode lets the process finish naturally.","classification":"tactical","recorded_at":"2026-02-10T19:03:02.768Z","id":"mx-4ed520"}
{"type":"convention","content":"Ajv strict mode requires type: 'object' alongside required and properties in JSON schema definitions. Omitting type causes a strict mode warning that Ajv treats as error.","classification":"tactical","recorded_at":"2026-02-10T19:03:04.233Z","id":"mx-b0403f"}
{"type":"convention","content":"No any, no @ts-ignore, no @ts-expect-error. Strict mode is enforced. Fix the types instead of suppressing them.","classification":"tactical","recorded_at":"2026-02-10T19:03:05.335Z","id":"mx-ee9655"}
{"type":"failure","description":"Put JSON schema in a .json file. tsc compiled fine but runtime import failed — .json not copied to dist/.","resolution":"Export schemas as const from .ts files (src/schemas/record-schema.ts). TypeScript compiles them into dist/ automatically.","classification":"tactical","recorded_at":"2026-02-10T19:03:14.647Z","id":"mx-cb54cf"}
{"type":"failure","description":"import Ajv from 'ajv' compiled fine but threw 'Ajv is not a constructor' at runtime in ESM.","resolution":"Use interop shim: import _Ajv from 'ajv'; const Ajv = _Ajv.default ?? _Ajv;","classification":"tactical","recorded_at":"2026-02-10T19:03:16.375Z","id":"mx-f3950d"}
{"classification":"tactical","recorded_at":"2026-02-26T18:45:21.017Z","tags":["auto-insight","hot-file","builder"],"evidence":{"bead":"seeds-b5c7"},"type":"pattern","name":"","description":"File /Users/jayminwest/Projects/os-eco/mulch/.overstory/worktrees/upgrade-test-builder/test/commands/upgrade.test.ts required 5 edits during session — high iteration suggests complexity","id":"mx-ecd3cf"}
