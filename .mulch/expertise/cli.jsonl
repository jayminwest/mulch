{"type":"pattern","name":"init-artifacts","description":"mulch init creates .mulch/, config, .gitattributes (merge=union for JSONL), and .mulch/README.md — modeled after Beads' bd init pattern","classification":"foundational","recorded_at":"2026-02-10T00:33:16.583Z","files":["src/utils/config.ts"]}
{"type":"pattern","name":"git-hook-markers","description":"Git hooks use # mulch:start / # mulch:end markers for safe append/remove in .git/hooks/pre-commit, same marker pattern as HTML comments in AGENTS.md sections","classification":"tactical","recorded_at":"2026-02-10T00:33:18.159Z","files":["src/commands/setup.ts"]}
{"type":"pattern","name":"idempotent-init","description":"initMulchDir uses existsSync guards for config and README so re-running init fills missing artifacts without overwriting user customizations","classification":"tactical","recorded_at":"2026-02-10T00:35:37.172Z","files":["src/utils/config.ts","src/commands/init.ts"]}
{"type":"pattern","name":"edit-by-index","description":"mulch edit uses 1-based JSONL line indices to identify records. Reads all records, mutates the target, validates with Ajv, then rewrites the whole file via writeExpertiseFile.","classification":"tactical","recorded_at":"2026-02-10T00:40:55.350Z","files":["src/commands/edit.ts"]}
{"type":"pattern","name":"commander-optional-arg-with-options","description":"When Commander has both a positional [arg] and options, the action callback receives (arg, options) — positional first, options second. See mulch prime implementation.","classification":"tactical","recorded_at":"2026-02-10T00:55:05.476Z","files":["src/commands/prime.ts"]}
