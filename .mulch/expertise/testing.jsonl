{"type":"failure","description":"Prune boundary test was flaky — daysAgo(14) plus milliseconds of clock drift made age 14.0000001, passing the > 14 check","resolution":"Math.floor the age-in-days computation so boundary records are treated as exactly N whole days old","classification":"tactical","recorded_at":"2026-02-10T00:33:19.878Z","id":"mx-992c08"}
{"type":"convention","content":"No mocks. Tests use real filesystems — create temp dirs with mkdtemp, write real config/JSONL, assert against real file contents, clean up in afterEach.","classification":"tactical","recorded_at":"2026-02-10T19:03:06.791Z","id":"mx-53d431"}
{"type":"convention","content":"Test file location mirrors src/ structure: test/commands/ for src/commands/, test/utils/ for src/utils/. Test file name matches source file name.","classification":"tactical","recorded_at":"2026-02-10T19:03:08.010Z","id":"mx-40a586"}
{"type":"failure","description":"Used process.exit(1) in command handler. Tests hung or produced garbled output because exit killed the Vitest process.","resolution":"Use process.exitCode = 1 instead. Lets the event loop drain and Vitest clean up.","classification":"tactical","recorded_at":"2026-02-10T19:03:18.137Z","id":"mx-c1d2d0"}
{"type":"failure","description":"Ajv schema had required and properties but no type: 'object'. Validation worked in dev but Ajv strict mode threw 'unknown keyword' in tests.","resolution":"Always include type: 'object' alongside required and properties in every JSON schema definition/oneOf branch.","classification":"tactical","recorded_at":"2026-02-10T19:03:19.964Z","id":"mx-a22e75"}
